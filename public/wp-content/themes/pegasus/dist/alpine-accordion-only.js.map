{"version":3,"file":"alpine-accordion-only.js","sources":["../assets/scripts/alpine-accordion-only.js"],"sourcesContent":["// Minimal Alpine bundle - Accordion + Essential Components + Slider Components\r\n// This bundle replaces main.js to fix accordion without breaking Flickity sliders\r\n// Includes Flickity and slider components to ensure they work correctly\r\n\r\nimport Alpine from 'alpinejs';\r\nimport intersect from '@alpinejs/intersect';\r\nimport collapse from '@alpinejs/collapse';\r\nimport Flickity from 'flickity';\r\nimport { pegasus } from './global/01-pegasus.js';\r\n// Import slider scripts - they will also register themselves, but we'll register them manually too\r\n// to ensure they're available even if their listeners fire late\r\nimport '@PegasusTheme/blocks/TeamMemberSlider/script';\r\nimport '@PegasusTheme/blocks/QuoteSlider/script';\r\n// Import Media component for TeamGridSlider\r\nimport Media from '@PegasusTheme/blocks/Media/script';\r\n\r\n// Accordion Panel Component\r\nclass BaseAccordionPanel {\r\n    panelOpen = false;\r\n}\r\n\r\n// Register Alpine plugins BEFORE components\r\nAlpine.plugin(intersect);\r\nAlpine.plugin(collapse);\r\n\r\n// Register components via alpine:init (standard Alpine pattern)\r\ndocument.addEventListener('alpine:init', () => {\r\n    // Accordion Panel\r\n    Alpine.data('accordionPanel', () => new BaseAccordionPanel());\r\n    \r\n    // ParacelsusApp (for body x-data)\r\n    Alpine.data('paracelsusApp', () => ({\r\n        atTop: true,\r\n        nearTop: true,\r\n        goingUp: false,\r\n        activeMenuItem: false,\r\n        langSwitcherOpen: false,\r\n        stationaryTimeout: null,\r\n        pageSwitcherName: false,\r\n        pageSwitcherLabel: false,\r\n        init() {\r\n            let prevScrollTop = 0;\r\n            let scrollFrame;\r\n            const scrollThrottleDelay = 100;\r\n            let lastScrollTime = Date.now();\r\n            \r\n            const handleScroll = () => {\r\n                if (scrollFrame) {\r\n                    cancelAnimationFrame(scrollFrame);\r\n                }\r\n                \r\n                scrollFrame = requestAnimationFrame(() => {\r\n                    const now = Date.now();\r\n                    if (now - lastScrollTime < scrollThrottleDelay) return;\r\n                    lastScrollTime = now;\r\n                    \r\n                    const scrollTop = Math.max(0, window.pageYOffset || document.documentElement.scrollTop);\r\n                    const threshold = 20;\r\n                    \r\n                    if (Math.abs(scrollTop - prevScrollTop) > threshold) {\r\n                        this.goingUp = scrollTop < prevScrollTop;\r\n                        prevScrollTop = scrollTop;\r\n                    }\r\n                });\r\n            };\r\n            \r\n            window.addEventListener('scroll', handleScroll, { passive: true });\r\n        }\r\n    }));\r\n    \r\n    // Navigation\r\n    Alpine.data('navigation', () => ({\r\n        activeMenuItem: false,\r\n        open: false,\r\n        openSearchForm: false,\r\n        activeSubMenuItem: false,\r\n        navigationIn: true,\r\n        atTop: true,\r\n        nearTop: true,\r\n        goingUp: false,\r\n        languagePromptOpen: false,\r\n        lastScrollY: 0,\r\n        init() {\r\n            this.$watch('activeMenuItem', () => this.activeSubMenuItem = false);\r\n            this.lastScrollY = window.scrollY;\r\n            window.addEventListener('scroll', () => {\r\n                const currentScrollY = window.scrollY;\r\n                this.goingUp = currentScrollY < this.lastScrollY;\r\n                this.lastScrollY = currentScrollY;\r\n            });\r\n            setTimeout(() => {\r\n                this.navigationIn = true;\r\n            }, 150);\r\n        }\r\n    }));\r\n    \r\n    // VideoBanner\r\n    Alpine.data('videoBanner', () => ({\r\n        init() {\r\n            this.$nextTick(() => {\r\n                const videoContainer = this.$refs.videoContainer;\r\n                if (videoContainer) {\r\n                    const video = videoContainer.querySelector('video');\r\n                    if (video) {\r\n                        video.muted = true;\r\n                        video.play().catch(err => {\r\n                            console.warn('Video autoplay failed:', err);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }));\r\n    \r\n    // Note: teamGridSlider and quoteSlider should be registered by their script imports\r\n    // The scripts use their own alpine:init listeners which should fire when Alpine starts\r\n});\r\n\r\n// Expose Flickity globally for slider components\r\n// This ensures Flickity is available when slider scripts initialize\r\nwindow.Flickity = Flickity;\r\n\r\n// Expose pegasus globally (already set by pegasus.js, but ensure it's available)\r\nwindow.pegasus = pegasus;\r\n\r\n// Expose Alpine globally\r\nwindow.Alpine = Alpine;\r\n\r\n// Ensure slider script imports have executed and attached their listeners\r\n// before starting Alpine. Static imports should have completed by now.\r\n// The slider scripts' alpine:init listeners will fire when Alpine.start() is called.\r\n\r\n// Start Alpine (but allow interception by layout.tsx)\r\n// The interceptor will handle the actual start timing\r\nif (typeof window.__alpineStartIntercepted === 'undefined') {\r\n    // Give a tiny delay to ensure all module imports have completed\r\n    // and their alpine:init listeners are attached\r\n    Promise.resolve().then(() => {\r\n        Alpine.start();\r\n    });\r\n}\r\n\r\n"],"names":["BaseAccordionPanel","constructor","__publicField","this","Alpine","plugin","intersect","collapse","document","addEventListener","data","atTop","nearTop","goingUp","activeMenuItem","langSwitcherOpen","stationaryTimeout","pageSwitcherName","pageSwitcherLabel","init","scrollFrame","prevScrollTop","lastScrollTime","Date","now","window","cancelAnimationFrame","requestAnimationFrame","scrollTop","Math","max","pageYOffset","documentElement","abs","passive","open","openSearchForm","activeSubMenuItem","navigationIn","languagePromptOpen","lastScrollY","$watch","scrollY","currentScrollY","setTimeout","$nextTick","videoContainer","$refs","video","querySelector","muted","play","catch","err","console","warn","Flickity","pegasus","__alpineStartIntercepted","Promise","resolve","then","start"],"mappings":"mNAiBA,MAAMA,EAAN,WAAAC,GACIC,EAAAC,KAAA,aAAY,EAAA,EAIhBC,EAAOC,OAAOC,GACdF,EAAOC,OAAOE,GAGdC,SAASC,iBAAiB,eAAe,KAErCL,EAAOM,KAAK,kBAAkB,IAAM,IAAIV,IAGxCI,EAAOM,KAAK,iBAAiB,KAAA,CACzBC,OAAO,EACPC,SAAS,EACTC,SAAS,EACTC,gBAAgB,EAChBC,kBAAkB,EAClBC,kBAAmB,KACnBC,kBAAkB,EAClBC,mBAAmB,EACnB,IAAAC,GACI,IACIC,EADAC,EAAgB,EAGpB,IAAIC,EAAiBC,KAAKC,MAsB1BC,OAAOhB,iBAAiB,UApBH,KACbW,GACAM,qBAAqBN,GAGzBA,EAAcO,uBAAsB,KAChC,MAAMH,EAAMD,KAAKC,MACjB,GAAIA,EAAMF,EAVU,IAU4B,OAChDA,EAAiBE,EAEjB,MAAMI,EAAYC,KAAKC,IAAI,EAAGL,OAAOM,aAAevB,SAASwB,gBAAgBJ,WAGzEC,KAAKI,IAAIL,EAAYP,GAFP,KAGdlB,KAAKU,QAAUe,EAAYP,EAC3BA,EAAgBO,EACpB,GACH,GAG2C,CAAEM,SAAS,GAC/D,MAIJ9B,EAAOM,KAAK,cAAc,KAAA,CACtBI,gBAAgB,EAChBqB,MAAM,EACNC,gBAAgB,EAChBC,mBAAmB,EACnBC,cAAc,EACd3B,OAAO,EACPC,SAAS,EACTC,SAAS,EACT0B,oBAAoB,EACpBC,YAAa,EACb,IAAArB,GACIhB,KAAKsC,OAAO,kBAAkB,IAAMtC,KAAKkC,mBAAoB,IAC7DlC,KAAKqC,YAAcf,OAAOiB,QAC1BjB,OAAOhB,iBAAiB,UAAU,KAC9B,MAAMkC,EAAiBlB,OAAOiB,QAC9BvC,KAAKU,QAAU8B,EAAiBxC,KAAKqC,YACrCrC,KAAKqC,YAAcG,CAAA,IAEvBC,YAAW,KACPzC,KAAKmC,cAAe,CAAA,GACrB,IACP,MAIJlC,EAAOM,KAAK,eAAe,KAAA,CACvB,IAAAS,GACIhB,KAAK0C,WAAU,KACX,MAAMC,EAAiB3C,KAAK4C,MAAMD,eAClC,GAAIA,EAAgB,CAChB,MAAME,EAAQF,EAAeG,cAAc,SACvCD,IACAA,EAAME,OAAQ,EACdF,EAAMG,OAAOC,OAAMC,IACfC,QAAQC,KAAK,yBAA0BF,EAAG,IAGtD,IAER,KACF,IAQN5B,OAAO+B,SAAWA,EAGlB/B,OAAOgC,QAAUA,EAGjBhC,OAAOrB,OAASA,OAQ+B,IAApCqB,OAAOiC,0BAGdC,QAAQC,UAAUC,MAAK,KACnBzD,EAAO0D,OAAK"}